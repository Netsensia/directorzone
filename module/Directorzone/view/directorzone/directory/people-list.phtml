<?php echo $this->partial('directory-nav.phtml'); ?>
<h3>People directory</h3>

<table id="people" data-link="row" class="rowlink table table-striped table-bordered table-hover">
<tr>
<th><a class="columnHeading" data-column-number="1">Name</a></th>
<th><a class="columnHeading" data-column-number="2">Company</a></th>
<th><a class="columnHeading" data-column-number="3">Appointment Type</a></th>
<th><a class="columnHeading" data-column-number="4">Date of Birth</a></th>
<th><a class="columnHeading" data-column-number="4">Added</a></th>
</tr>
</table>

<ul class="pager">
<li class="previous" id="previous" class="disabled"><a href="#">&larr; Previous</a></li>
<li class="next" id="next"><a href="#">Next &rarr;</a></li>
</ul>

<script>

$(document).ready(function() {
	$(document).delegate('.columnHeading', 'click', function() {
		loadTheTable();
	});
	loadTheTable();
});

function loadTheTable()
{
	netsensia_Pager(
			1,
			20,
			'people',
			'/ajax/people/list',
			function(key, value) {
				var url = '/directories/people/' + value.internalId;
				var newRow = '<tr>';
				newRow += '<td><a href="' + url + '">' + value.name + '</a></td>';
				newRow += '<td>' + value.companyname + '</td>';
				newRow += '<td>' + value.appointmenttype + '</td>';
				newRow += '<td>' + value.dob + '</td>';
				newRow += '<td class="prettydate">' + prettyDate(value.createdTime) + '</td>';
				newRow += '</tr>';

				return newRow;
			}
		);	
}

</script>